import{a as re,b as ae,c as oe,d as ne}from"./chunk-IGMKII3H.js";import{a as y,b as T,c as B,d as W,e as S,f as M}from"./chunk-LXK3ZM2F.js";import{a as p,b as G}from"./chunk-FMBEFGB3.js";import"./chunk-O7F3PPF3.js";import"./chunk-4AUZCU3R.js";import{c as ie}from"./chunk-2D66LXFZ.js";import{B as J,Ca as te,E as K,F as Q,G as ee,h as q,j as w,m as H,n as Z,t as X,x as Y,y as $}from"./chunk-42GC3H2R.js";import{Cb as d,Db as r,Dd as U,Eb as o,Fb as c,Ia as L,Id as b,Jd as V,Md as z,Tb as f,Wa as n,Wb as P,Za as R,db as N,eb as l,gc as O,ia as g,ib as j,ic as k,jc as s,kc as x,ma as h,uc as A,wa as I,wb as _,wc as D,xb as C,xc as v}from"./chunk-DT3HLPPQ.js";import"./chunk-2EBTC7QX.js";import"./chunk-VB56BUGO.js";var u=class a{constructor(){y.initializeApp(T.firebase)}getFirestore(){return S}getDatabase(){return M}getAuth(){return W}static \u0275fac=function(i){return new(i||a)};static \u0275prov=g({token:a,factory:a.\u0275fac,providedIn:"root"})};var F=class a{constructor(t,i,e){this.afu=t;this.router=i;this.ngZone=e;this.afu.authState.subscribe(m=>{this.authState=m})}authState;afAuth;afs;showLoader=!1;get isUserAnonymousLoggedIn(){return this.authState!==null?this.authState.isAnonymous:!1}get currentUserId(){return this.authState!==null?this.authState.uid:""}get currentUserName(){return this.authState.email}get currentUser(){return this.authState!==null?this.authState:null}get isUserEmailLoggedIn(){return this.authState!==null&&!this.isUserAnonymousLoggedIn}registerWithEmail(t,i){return this.afu.createUserWithEmailAndPassword(t,i).then(e=>{this.authState=e}).catch(e=>{throw console.log(e),e})}loginWithEmail(t,i){return this.afu.signInWithEmailAndPassword(t,i).then(e=>{this.authState=e}).catch(e=>{throw console.log(e),e})}singout(){this.afu.signOut(),this.router.navigate(["/login"])}SignUp(t,i){return this.afAuth.createUserWithEmailAndPassword(t,i).then(e=>{this.SendVerificationMail(),this.SetUserData(e.user)}).catch(e=>{window.alert(e.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["/dashboard/sales"])})}SetUserData(t){let i=this.afs.doc(`users/${t.uid}`),e={email:t.email,displayName:t.displayName,uid:t.uid,photoURL:t.photoURL||"src/favicon.ico",emailVerified:t.emailVerified};return i.delete().then(function(){}).catch(function(m){}),i.set(e,{merge:!0})}SignIn(t,i){return this.afAuth.signInWithEmailAndPassword(t,i).then(e=>{e.user.emailVerified!==!0?(this.SetUserData(e.user),this.SendVerificationMail(),this.showLoader=!0):(this.showLoader=!1,this.ngZone.run(()=>{this.router.navigate(["/auth/login"])}))}).catch(e=>{throw e})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>{window.alert(i)})}static \u0275fac=function(i){return new(i||a)(h(B),h(b),h(R))};static \u0275prov=g({token:a,factory:a.\u0275fac,providedIn:"root"})};var ue=()=>["/dashboards/sales"],pe=()=>["/pages/authentication/reset-password/basic"],ge=()=>["/auth/register"];function he(a,t){if(a&1&&(r(0,"p",15),s(1),o()),a&2){let i=P();n(),x(i.errorMessage)}}function fe(a,t){if(a&1&&(r(0,"p",15),s(1),o()),a&2){let i=P();n(),x(i._error.message)}}var le=class a{constructor(t,i,e,m,E,ve,be,ye,Se,we){this.document=t;this.elementRef=i;this.sanitizer=e;this.authservice=m;this.router=E;this.formBuilder=ve;this.renderer=be;this.firebaseService=ye;this.toastr=Se;this.ngParticlesService=we;let Me=this.renderer.selectRootElement("body",!0)}disabled="";active="Angular";showLoader;id="tsparticles";particlesOptions={particles:{number:{value:200,density:{enable:!0,value_area:400}},color:{value:"#4d99ff"},shape:{type:"circle",stroke:{width:0,color:"#ff0000"},polygon:{nb_sides:5},image:{src:"",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:2,opacity_min:0,sync:!1}},size:{value:1.5,random:!1,anim:{enable:!1,speed:5,size_min:0,sync:!1}},line_linked:{enable:!0,distance:100,color:"#fff",opacity:1,width:1},move:{enable:!0,speed:1,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:3e3,rotateY:3e3}},array:[]},interactivity:{detect_on:"canvas",events:{onHover:{enable:!0,mode:"grab"},onClick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:100,line_linked:{opacity:1}},bubble:{distance:200,size:80,duration:.4},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}},mouse:{}},retina_detect:!1};firestoreModule;databaseModule;authModule;ngOnInit(){this.renderer.addClass(this.document.body,"authentication-background"),this.ngParticlesService.init(async t=>{await re(t)}),this.loginForm=this.formBuilder.group({username:["spruko@admin.com",[w.required,w.email]],password:["sprukoadmin",w.required]}),this.firestoreModule=this.firebaseService.getFirestore(),this.databaseModule=this.firebaseService.getDatabase(),this.authModule=this.firebaseService.getAuth()}particlesLoaded(t){console.log(t)}email="spruko@admin.com";password="sprukoadmin";errorMessage="";_error={name:"",message:""};clearErrorMessage(){this.errorMessage="",this._error={name:"",message:""}}login(){this.clearErrorMessage(),this.validateForm(this.email,this.password)?this.authservice.loginWithEmail(this.email,this.password).then(()=>{this.router.navigate(["/dashboards/sales"]),console.clear(),this.toastr.success("login successful","Vyzor",{timeOut:3e3,positionClass:"toast-top-right"})}).catch(t=>{this._error=t,this.router.navigate(["/"])}):this.toastr.error("Invalid details","Vyzor",{timeOut:3e3,positionClass:"toast-top-right"})}validateForm(t,i){return t.length===0?(this.errorMessage="please enter email id",!1):i.length===0?(this.errorMessage="please enter password",!1):i.length<6?(this.errorMessage="password should be at least 6 char",!1):(this.errorMessage="",!0)}loginForm;error="";get form(){return this.loginForm.controls}Submit(){console.log(this.loginForm),this.loginForm.controls.username.value==="spruko@admin.com"&&this.loginForm.controls.password.value==="sprukoadmin"?(this.router.navigate(["/dashboards/sales"]),this.toastr.success("login successful","Vyzor",{timeOut:3e3,positionClass:"toast-top-right"})):this.toastr.error("Invalid details","Vyzor",{timeOut:3e3,positionClass:"toast-top-right"})}ngOnDestroy(){let t=this.renderer.selectRootElement("body",!0);this.renderer.removeAttribute(t,"class")}showPassword=!1;toggleClass="ri-eye-off-line";togglePassword(){this.showPassword=!this.showPassword,this.toggleClass==="ri-eye-line"?this.toggleClass="ri-eye-off-line":this.toggleClass="ri-eye-line"}static \u0275fac=function(i){return new(i||a)(l(I),l(L),l(U),l(F),l(b),l(K),l(N),l(u),l(p),l(ae))};static \u0275cmp=j({type:a,selectors:[["app-login-page"]],features:[D([u,{provide:p,useClass:p}])],decls:47,vars:23,consts:[[1,"authentication-basic-background"],["src","./assets/images/media/backgrounds/9.png","alt",""],[3,"particlesLoaded","id","options"],[1,"container"],[1,"row","justify-content-center","align-items-center","authentication","authentication-basic","h-100"],[1,"col-xxl-4","col-xl-5","col-lg-6","col-md-6","col-sm-8","col-12"],[1,"card","custom-card","border-0","my-4"],[1,"card-body"],[1,"card","custom-card","border-0","my-4","shadow-none"],[1,"mb-4"],[1,"d-flex","justify-content-center",3,"routerLink"],["src","./assets/images/logos/kaica.png","alt","logo",1,"desktop-dark"],[1,"mb-1","fw-semibold"],[1,"mb-4","text-muted","fw-normal"],[3,"ngSubmit","formGroup"],[1,"text-danger"],[1,"row","gy-3"],[1,"col-xl-12"],["for","signin-username",1,"form-label","text-default"],["type","text","id","signin-username","placeholder","user name","formControlName","username","required","",1,"form-control",3,"ngModel"],[1,"col-xl-12","mb-2"],["for","signin-password",1,"form-label","text-default","d-block"],[1,"position-relative"],["type","password","id","signin-password","placeholder","password","placeholder","Password","formControlName","password","required","",1,"form-control","create-password-input",3,"type","ngModel"],["href","javascript:void(0);","id","button-addon2",1,"show-password-button","text-muted",3,"click"],[1,"mt-2"],[1,"form-check"],["type","checkbox","value","","id","defaultCheck1",1,"form-check-input"],["for","defaultCheck1",1,"form-check-label"],[1,"float-end","ms-1","fw-medium","fs-12",3,"routerLink"],[1,"d-grid","mt-3"],["autofocus","",3,"disabled"],[1,"text-center","mt-3","fw-medium"],[1,"text-primary",3,"routerLink"]],template:function(i,e){i&1&&(r(0,"div",0),c(1,"img",1),o(),r(2,"ngx-particles",2),f("particlesLoaded",function(E){return e.particlesLoaded(E)}),o(),r(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",7)(10,"div",9)(11,"a",10),c(12,"img",11),o()(),r(13,"div")(14,"h4",12),s(15,"\xA1Hola, bienvenido/a de nuevo!"),o(),r(16,"p",13),s(17," Por favor ingrese sus credenciales "),o()(),r(18,"form",14),f("ngSubmit",function(){return e.Submit()}),_(19,he,2,1,"p",15),_(20,fe,2,1,"p",15),r(21,"div",16)(22,"div",17)(23,"label",18),s(24,"Email"),o(),c(25,"input",19),o(),r(26,"div",20)(27,"label",21),s(28,"Contrase\xF1a"),o(),r(29,"div",22),c(30,"input",23),r(31,"a",24),f("click",function(){return e.togglePassword()}),c(32,"i"),o()(),r(33,"div",25)(34,"div",26),c(35,"input",27),r(36,"label",28),s(37," Rcordarme "),o(),r(38,"a",29),s(39,"\xBFOlvidaste tu contrase\xF1a?"),o()()()()(),r(40,"div",30)(41,"button",31),s(42," Iniciar sesi\xF3n "),o()()(),r(43,"div",32),s(44," \xBFNo tienes una cuenta? "),r(45,"a",33),s(46,"Registrate"),o()()()()()()()()()),i&2&&(n(2),d("id",e.id)("options",e.particlesOptions),n(9),d("routerLink",v(20,ue)),n(7),d("formGroup",e.loginForm),n(),C(e.errorMessage.length>0?19:-1),n(),C(e._error.message.length>0?20:-1),n(5),d("ngModel",e.email),n(5),d("type",e.showPassword?"text":"password")("ngModel",e.password),n(2),k(A("",e.toggleClass," align-middle")),n(6),d("routerLink",v(21,pe)),n(3),k(A("btn btn-primary",e.disabled)),O("loader--text",e.authservice.showLoader),d("disabled",!e.loginForm.valid||e.authservice.showLoader),n(4),d("routerLink",v(22,ge)))},dependencies:[z,V,te,Q,X,q,H,Z,J,ee,Y,$,y,ie,ne,oe,M,S,G],styles:[".btn-main-primary{color:#fff!important;background-color:#5965f9!important;border-color:#5965f9!important}.main-signin-header[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-width:1px}.firebase-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:28px;height:28px}.main-signin-header[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{width:95px;justify-content:center;margin:0 auto;padding:4px;border-radius:0;border:1px solid #e4e3ef}.main-signin-header[_ngcontent-%COMP%]   .firebase-img[_ngcontent-%COMP%]{padding:7px}.firebase-img.nav-link.active[_ngcontent-%COMP%]{background-color:rgba(var(--primary-rgb),.05)!important}"]})};export{le as LoginPage};
