import{e as a,ia as l}from"./chunk-DT3HLPPQ.js";import{a as i}from"./chunk-VB56BUGO.js";var o=class r{localStorageKey="vyzor-ng";initialState={theme:"dark",direction:"ltr",navigationStyles:"vertical",menuStyles:"",layoutStyles:"detached",pageStyles:"flat",widthStyles:"fullwidth",menuPosition:"fixed",headerPosition:"fixed",menuColor:"transparent",headerColor:"transparent",themePrimary:"",themeBackground:"",backgroundImage:""};stateSubject=new a(this.initialState);state$=this.stateSubject.asObservable();constructor(){let t=this.getInitialStateFromLocalStorage();this.initializeState(),this.stateSubject.next(t)}getInitialStateFromLocalStorage(){try{let t=localStorage.getItem(this.localStorageKey);if(t)return JSON.parse(t)}catch{}return this.initialState}initializeState(){let t=i({},this.initialState);this.applyDirectionSpecificChanges(t.direction),this.stateSubject.next(t)}updateState(t){let e=this.stateSubject.getValue();if(!e){this.updateStateAndEmit(t);return}if(t){let s=i(i({},e),t);this.updateStateAndEmit(s)}else{this.updateStateAndEmit(e);return}}state={};getState(t){return this.state[t]}applyThemeBackgroundSpecificChanges(t){if(!t)return;let e=document.querySelector("html");e?.style.setProperty("--body-bg-rgb",t.main),e?.style.setProperty("--body-bg-rgb2",t.secondary),e?.style.setProperty("--light-rgb",t.accent),e?.style.setProperty("--form-control-bg",`rgb(${t.secondary})`),e?.style.setProperty("--input-border",t.overlay),e?.style.setProperty("--gray-3",t.overlay),this.applythemeSpecificChanges(t.theme)}applyDirectionSpecificChanges(t){document.querySelector("html")?.setAttribute("dir",t)}applythemeSpecificChanges(t){let e=document.querySelector("html");e?.setAttribute("data-theme-mode",t),e?.setAttribute("data-header-styles",t),e?.setAttribute("data-menu-styles",t)}applyNavigationStylesSpecificChanges(t){let e=document.querySelector("html");e?.setAttribute("data-nav-layout",t),t=="horizontal"&&(e?.setAttribute("data-nav-style","menu-click"),e?.removeAttribute("data-vertical-style"))}applyMenuStylesSpecificChanges(t){let e=document.querySelector("html");e?.setAttribute("data-nav-style",t),e?.setAttribute("data-toggled",t+"-closed"),e?.removeAttribute("data-vertical-style")}applyLayoutStylesSpecificChanges(t){let e=document.querySelector("html");switch(e?.setAttribute("data-vertical-style",t),e?.removeAttribute("data-nav-style"),t){case"default":e?.setAttribute("data-vertical-style","overlay"),e?.setAttribute("data-toggled","");break;case"closed":e?.setAttribute("data-toggled","close-menu-close");break;case"icontext":e?.setAttribute("data-toggled","icon-text-close");break;case"overlay":e?.setAttribute("data-toggled","icon-overlay-close");break;case"detached":e?.setAttribute("data-toggled","detached-close");break;case"doublemenu":e?.setAttribute("data-toggled","double-menu-open"),setTimeout(()=>{document.querySelector(".main-menu .slide.active ul")?e?.setAttribute("data-toggled","double-menu-open"):e?.setAttribute("data-toggled","double-menu-close")},100);break}t==="icon-text"?e?.setAttribute("icon-text","open"):e?.removeAttribute("icon-text")}applypageStylesSpecificChanges(t){document.querySelector("html")?.setAttribute("data-page-style",t)}applywidthStylesSpecificChanges(t){document.querySelector("html")?.setAttribute("data-width",t)}applymenuPositionSpecificChanges(t){document.querySelector("html")?.setAttribute("data-menu-position",t)}applyheaderPositionSpecificChanges(t){document.querySelector("html")?.setAttribute("data-header-position",t)}applyheaderColorSpecificChanges(t){document.querySelector("html")?.setAttribute("data-header-styles",t)}applymenuColorSpecificChanges(t){document.querySelector("html")?.setAttribute("data-menu-styles",t)}applyPrimarySpecificChanges(t){document.querySelector("html")?.style.setProperty("--primary-rgb",t)}applybackgroundImageSpecificChanges(t){document.querySelector("html")?.setAttribute("data-bg-img",t)}applyReset(){let t=document.querySelector("html");t&&(t?.style.removeProperty("--body-bg-rgb"),t?.style.removeProperty("--gray-3"),t?.style.removeProperty("--body-bg-rgb2"),t?.style.removeProperty("--light-rgb"),t?.style.removeProperty("--form-control-bg"),t?.style.removeProperty("--input-border"),t?.style.removeProperty("--primary-rgb")),t?.removeAttribute("data-bg-img"),t?.setAttribute("data-vertical-style","doublemenu"),this.stateSubject.next(this.initialState),this.updateStateAndEmit(this.initialState),localStorage.clear()}updateStateAndEmit(t){let e=this.stateSubject.getValue();t.theme&&this.applythemeSpecificChanges(t.theme),t.direction&&this.applyDirectionSpecificChanges(t.direction),t.navigationStyles&&this.applyNavigationStylesSpecificChanges(t.navigationStyles),t.menuStyles&&!t.layoutStyles&&this.applyMenuStylesSpecificChanges(t.menuStyles),t.layoutStyles&&!t.menuStyles&&this.applyLayoutStylesSpecificChanges(t.layoutStyles),t.pageStyles&&this.applypageStylesSpecificChanges(t.pageStyles),t.widthStyles&&this.applywidthStylesSpecificChanges(t.widthStyles),t.menuPosition&&this.applymenuPositionSpecificChanges(t.menuPosition),t.headerPosition&&this.applyheaderPositionSpecificChanges(t.headerPosition),t.themePrimary&&this.applyPrimarySpecificChanges(t.themePrimary),t.themeBackground&&this.applyThemeBackgroundSpecificChanges(t.themeBackground),t.headerColor&&this.applyheaderColorSpecificChanges(t.headerColor),t.menuColor&&this.applymenuColorSpecificChanges(t.menuColor),t.backgroundImage&&this.applybackgroundImageSpecificChanges(t.backgroundImage),this.stateSubject.next(t),this.updateLocalStorage(t)}updateLocalStorage(t){try{localStorage.setItem(this.localStorageKey,JSON.stringify(t))}catch{}}static \u0275fac=function(e){return new(e||r)};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};export{o as a};
