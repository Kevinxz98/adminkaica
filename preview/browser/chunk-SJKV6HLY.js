import{c as Q,e as I,f as u,g as k}from"./chunk-6RC4WPLR.js";import{i as J}from"./chunk-CPTV3ZB4.js";import{a as Z}from"./chunk-ZQA6AIGY.js";import{t as K}from"./chunk-YYBUJILI.js";import{c as q,d as _,f as m,g as x,i as w}from"./chunk-4AUZCU3R.js";import{Cb as b,Db as P,Dd as Y,Eb as N,Fb as W,Ia as y,J as E,P as A,Pb as V,Qa as L,Tb as U,Ub as X,Wa as B,Z as D,Za as O,ba as F,d as p,eb as r,ia as M,ib as z,jb as H,k as C,ka as j,kb as $,la as S,ma as d,n as T,s as R,ub as G,wa as f,zc as v}from"./chunk-DT3HLPPQ.js";import{a as h}from"./chunk-VB56BUGO.js";var ie=(s,e)=>({startAnimationTime:s,exitAnimationTime:e}),oe=(s,e)=>({value:s,params:e}),ne=new S("LIGHTBOX_CONFIG"),se=q("lightbox",[x("void, exit",m({opacity:0,transform:"scale(0.7)"})),x("enter",m({transform:"none"})),w("* => enter",_("{{startAnimationTime}}ms cubic-bezier(0, 0, 0.2, 1)",m({transform:"none",opacity:1}))),w("* => void, * => exit",_("{{exitAnimationTime}}ms cubic-bezier(0.4, 0.0, 0.2, 1)",m({opacity:0})))]),re=(()=>{let e=class e{constructor(i,t,o){this._document=i,this._focusTrapFactory=t,this._elementRef=o,this.state="enter",this._savePreviouslyFocusedElement()}onAnimationDone(i){i.toState==="enter"?this._trapFocus():(this.overlayRef.dispose(),this._restoreFocus())}_trapFocus(){this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)),this._focusTrap.focusInitialElementWhenReady()}_savePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then(()=>this._elementRef.nativeElement.focus()))}_restoreFocus(){let i=this._elementFocusedBeforeDialogWasOpened;i&&typeof i.focus=="function"&&i.focus(),this._focusTrap&&this._focusTrap.destroy()}};e.\u0275fac=function(t){return new(t||e)(r(f,8),r(K),r(y))},e.\u0275cmp=z({type:e,selectors:[["lightbox"]],hostAttrs:["tabindex","-1","aria-modal","true"],hostVars:12,hostBindings:function(t,o){t&1&&X("@lightbox.done",function(c){return o.onAnimationDone(c)}),t&2&&(V("@lightbox",v(9,oe,o.state,v(6,ie,o.startAnimationTime,o.exitAnimationTime))),G("id","lightbox-"+o.id)("role",o.role)("aria-labelledby",o.ariaLabel?null:o.ariaLabelledBy)("aria-label",o.ariaLabel)("aria-describedby",o.ariaDescribedBy||null))},decls:2,vars:4,consts:[["aria-label","Close",1,"g-btn-close",3,"click","innerHTML"],[3,"id","destroyRef","skipInitConfig"]],template:function(t,o){t&1&&(P(0,"i",0),U("click",function(){return o.overlayRef.detach()}),N(),W(1,"gallery",1)),t&2&&(b("innerHTML",o.closeIcon,L),B(),b("id",o.id)("destroyRef",!1)("skipInitConfig",!0))},dependencies:[u],styles:["lightbox{position:relative;display:block;width:1100px;height:800px;max-width:94vw;max-height:90vh;border-radius:4px;overflow:hidden;box-shadow:0 11px 15px -7px #0003,0 24px 38px 3px #00000024,0 9px 46px 8px #0000001f}  lightbox:focus{outline:none}  lightbox gallery{height:100%;width:100%;overflow:hidden;margin:0}  lightbox gallery gallery-core{height:100%!important}  .g-backdrop{background-color:#00000052}  .fullscreen{width:100%}  .fullscreen   lightbox{max-width:unset;max-height:unset;position:fixed;inset:0;height:100%;width:100%;border-radius:0}  .g-overlay{margin:auto}@media only screen and (max-width: 480px){  .g-overlay{width:100%}  .g-overlay   lightbox{max-width:unset;max-height:unset;position:fixed;inset:0;height:100%;width:100%;border-radius:0}}  .g-btn-close{position:absolute;right:.9em;top:.9em;z-index:60;cursor:pointer;width:20px;height:20px}@media only screen and (max-width: 480px){  .g-btn-close{right:.7em;top:.7em}}  .g-btn-close svg{width:100%;height:100%;opacity:.6;transition:opacity linear .15s;filter:drop-shadow(0px 0px 2px rgba(0,0,0,.8))}  .g-btn-close svg:hover{opacity:1}"],data:{animation:[se]},changeDetection:0});let s=e;return s})(),ee={backdropClass:"g-backdrop",panelClass:"g-overlay",hasBackdrop:!0,keyboardShortcuts:!0,role:"lightbox",startAnimationTime:150,exitAnimationTime:75,closeIcon:`<?xml version="1.0" encoding="UTF-8"?>
<svg width="512px" height="512px" enable-background="new 0 0 47.971 47.971" version="1.1" viewBox="0 0 47.971 47.971" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
	<path d="M28.228,23.986L47.092,5.122c1.172-1.171,1.172-3.071,0-4.242c-1.172-1.172-3.07-1.172-4.242,0L23.986,19.744L5.121,0.88   c-1.172-1.172-3.07-1.172-4.242,0c-1.172,1.171-1.172,3.071,0,4.242l18.865,18.864L0.879,42.85c-1.172,1.171-1.172,3.071,0,4.242   C1.465,47.677,2.233,47.97,3,47.97s1.535-0.293,2.121-0.879l18.865-18.864L42.85,47.091c0.586,0.586,1.354,0.879,2.121,0.879   s1.535-0.293,2.121-0.879c1.172-1.171,1.172-3.071,0-4.242L28.228,23.986z" fill="#fff"/>
</svg>
`},ae=(()=>{let e=class e{constructor(i,t,o,n){this._gallery=t,this._overlay=o,this._sanitizer=n,this.opened=new p,this.closed=new p,this._config=i?h(h({},ee),i):ee}setConfig(i){this._config=h(h({},this._config),i)}open(i=0,t="lightbox",o){let n=o?h(h({},this._config),o):this._config,c={backdropClass:n.backdropClass,panelClass:n.panelClass,hasBackdrop:n.hasBackdrop,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:this._overlay.scrollStrategies.block(),disposeOnNavigation:!0},l=this._gallery.ref(t);l.set(i),this._overlayRef=this._overlay.create(c),this._overlayRef.attachments().subscribe(()=>this.opened.next(t)),this._overlayRef.detachments().subscribe(()=>this.closed.next(t));let g=new Z(re),a=this._overlayRef.attach(g);a.instance.id=t,a.instance.overlayRef=this._overlayRef,a.instance.closeIcon=this._sanitizer.bypassSecurityTrustHtml(this._config.closeIcon),a.instance.role=this._config.role,a.instance.ariaLabel=this._config.ariaLabel,a.instance.ariaLabelledBy=this._config.ariaLabelledBy,a.instance.ariaDescribedBy=this._config.ariaDescribedBy,a.instance.startAnimationTime=this._config.startAnimationTime,a.instance.exitAnimationTime=this._config.exitAnimationTime,n.hasBackdrop&&this._overlayRef.backdropClick().subscribe(()=>this.close()),n.keyboardShortcuts&&this._overlayRef.keydownEvents().subscribe(te=>{switch(te.keyCode){case 37:l.prev();break;case 39:l.next();break;case 27:this.close()}})}close(){this._overlayRef.hasAttached()&&this._overlayRef.detach()}};e.\u0275fac=function(t){return new(t||e)(d(ne,8),d(I),d(J),d(Y))},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})(),Le=(()=>{let e=class e{constructor(i,t,o,n,c,l){this._zone=i,this._el=t,this._gallery=o,this._lightbox=n,this._document=c,this._galleryCmp=l,this._galleryId="lightbox",this.selector="img",this._mode=l?"gallery":"detector"}ngOnInit(){this._zone.runOutsideAngular(()=>{this._galleryId=this.gallerize||this._galleryId;let i=this._gallery.ref(this._galleryId);switch(this._mode){case"detector":this.detectorMode(i);break;case"gallery":this.galleryMode(i)}})}ngOnDestroy(){switch(this._mode){case"detector":this._detector$.complete(),this._observer$.disconnect();break;case"gallery":this._itemClick$.unsubscribe(),this._itemChange$.unsubscribe()}}galleryMode(i){this._itemClick$=this._galleryCmp.galleryRef.itemClick.subscribe(t=>this._lightbox.open(t,this._galleryId)),this._itemChange$=this._galleryCmp.galleryRef.itemsChanged.subscribe(t=>i.load(t.items))}detectorMode(i){this._detector$=new p,this._detector$.pipe(E(300),D(()=>{let t=this._el.nativeElement.querySelectorAll(this.selector);if(t&&t.length){let o=[];return T(t).pipe(R((n,c)=>{if(n.style.cursor="pointer",n.addEventListener("click",()=>{this._zone.run(()=>this._lightbox.open(c,this._galleryId))}),n instanceof HTMLImageElement)return{src:n.getAttribute("imageSrc")||n.src,thumb:n.getAttribute("thumbSrc")||n.src};{let g=this._document.defaultView.getComputedStyle(n,null).backgroundImage.slice(4,-1).replace(/"/g,"");return{src:n.getAttribute("imageSrc")||g,thumb:n.getAttribute("thumbSrc")||g}}}),F(n=>o.push(new Q(n))),A(()=>i.load(o)))}else return C})).subscribe(),this._observer$=new MutationObserver(()=>this._detector$.next()),this._observer$.observe(this._el.nativeElement,{childList:!0,subtree:!0})}};e.\u0275fac=function(t){return new(t||e)(r(O),r(y),r(I),r(ae),r(f),r(u,11))},e.\u0275dir=$({type:e,selectors:[["","gallerize",""]],inputs:{gallerize:"gallerize",selector:"selector"}});let s=e;return s})();var Be=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=H({type:e}),e.\u0275inj=j({imports:[k,k]});let s=e;return s})();export{ae as a,Le as b,Be as c};
